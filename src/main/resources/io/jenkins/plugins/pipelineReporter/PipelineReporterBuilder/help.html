<div>
  <p>
      Generates a HTML report of the execution of a pipeline.<br>
      Report will include other pipelines steps that are executed as part of the pipeline passed as argument.<br>
  </p>
  <p>
      The HTML template file name is specified using a parameter and by default value is jenkins-generic-matrix-email-html.template<br>
      You notice that it is very similar to mail-ext plugin template files.<br>
      <br>
      All the variables starting with $ are calculated in the plugin.<br>
      <br>
      Once the plugin is done generating it will store the full HTML in $HTML_OUTPUT<br>
      When generating the report if one of the steps is a AtomNode like: org.jenkinsci.plugins.workflow.support.steps.build.BuildTriggerStep$DescriptorImpl<br>
      it will attempt to extract the build job name and build number and if it is a pipeline, if so it will iterate over steps of that pipeline also. 
  </p>  
  <p>
  	  <br>
  	  Execution options:<br>
  	  <ul>
  		<li>Pipeline script: report pipelineName: '', buildNumber: 0</li>
		<li>Free Style Job executed as part of the pipeline</li>
  		<li>Free Style Job triggered when pipeline job completes execution</li>
	  </ul>
  </p>
  <p>Report Example</p>
  
  
<STYLE>
          body table, td, th, p, h1, h2 {
          margin:0;
          font:normal normal 100% Georgia, Serif;
          background-color: #ffffff;
          }
          h1, h2 {
          border-bottom:dotted 1px #999999;
          padding:5px;
          margin-top:10px;
          margin-bottom:10px;
          color: #000000;
          font: normal bold 130% Georgia,Serif;
          background-color:#f0f0f0;
          }
          tr.gray {
          background-color:#f0f0f0;
          }
          h2 {
          padding:5px;
          margin-top:5px;
          margin-bottom:5px;
          font: italic bold 110% Georgia,Serif;
          }
          .bg2 {
          color:black;
          background-color:#E0E0E0;
          font-size:110%
          }
          th {
          font-weight: bold;
          }
          tr, td, th {
          padding:2px;
          }
          td.test_passed {
          color:blue;
          }
          td.test_failed {
          color:red;
          }
          td.test_skipped {
          color:grey;
          }
          .console {
          font: normal normal 90% Courier New, monotype;
          padding:0px;
          margin:0px;
          }
          div.content, div.header {
          background: #ffffff;
          border: dotted
          1px #666;
          margin: 2px;
          content: 2px;
          padding: 2px;
          }
          table.border, th.border, td.border {
          border: 1px solid black;
          border-collapse:collapse;
          }
</STYLE>
<BODY>
    <div class="header">
      <!-- GENERAL INFO -->
      <table>
        <tr class="gray">
          <td align="right">
                <img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" />
          </td>
          <td valign="center">
            <b style="font-size: 200%;">pipeline Success</b>
          </td>
        </tr>
        <tr>
          <td>Pipeline URL</td>
          <td>
            <a href="http://localhost:8080/jenkins/job/pipeline/31/">http://localhost:8080/jenkins/job/pipeline/31/</a>
          </td>
        </tr>
        <tr>
          <td>Build #:</td>
          <td>31</td>
        </tr>
        <tr>
          <td>Date of build:</td>
          <td>49 sec ago</td>
        </tr>
        <tr>
          <td>Build duration:</td>
          <td>39 sec</td>
        </tr>
        <tr>
          <td>Build cause:</td>
          <td>
		Started by user anonymous

          </td>
        </tr>
      </table>
    </div>


<!-- CHANGES TEMPLATE -->
<div class="content">
	<a href="http://localhost:8080/jenkins/job/pipeline/31//changes">
          <h1>Changes</h1>
        </a>
	
</div>

<div class="content">
<h1>Pipeline Details</h1>
		<table>
			<tr>
		 		<td>Build Output:</td>
		 		<td style="word-break: break-all">
		   			<a href="http://localhost:8080/jenkins/job/pipeline/31//console">http://localhost:8080/jenkins/job/pipeline/31/console</a>
		  		</td>
			</tr>
		</table>
		<div class="content">
			<h2>Steps</h2>
			
			<table style="width:100%">
				<th>id</th><th>Step</th><th>Log</th><th>Duration</th><th>Status</th>
				<tr><td align="center">2</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">Start of Pipeline</td><td></td><td></td></tr><tr><td align="center">3</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">Allocate node : Start</td><td>38.1 sec </td><td></td></tr><tr><td align="center">4</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">Allocate node : Body : Start</td><td>37.7 sec </td><td></td></tr><tr><td align="center">5</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">Stage : Start</td><td>27.6 sec </td><td></td></tr><tr><td align="center">6</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">test</td><td>27.5 sec </td><td></td></tr><tr><td align="center">7</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">Building pipeline2</td><td>27.4 sec </td><td>Scheduling project: pipeline2
Starting building: pipeline2 #20
</td></tr><tr><td align="center">2</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ Start of Pipeline</td><td></td><td></td></tr><tr><td align="center">3</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ Allocate node : Start</td><td>20.3 sec </td><td></td></tr><tr><td align="center">4</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ Allocate node : Body : Start</td><td>20.2 sec </td><td></td></tr><tr><td align="center">5</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ Stage : Start</td><td>10.3 sec </td><td></td></tr><tr><td align="center">6</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ test</td><td>10.2 sec </td><td></td></tr><tr><td align="center">7</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ Building pipelinejob</td><td>10.2 sec </td><td>Scheduling project: pipelinejob
Starting building: pipelinejob #60
</td></tr><tr><td align="center">10</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ Stage : Start</td><td>9.9 sec </td><td></td></tr><tr><td align="center">11</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ test2</td><td>9.8 sec </td><td></td></tr><tr><td align="center">12</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> ├ Building pipelinejob</td><td>9.8 sec </td><td>Scheduling project: pipelinejob
Starting building: pipelinejob #61
</td></tr><tr><td align="center">17</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left"> └ End of Pipeline</td><td></td><td></td></tr><tr><td align="center">10</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">Stage : Start</td><td>10.0 sec </td><td></td></tr><tr><td align="center">11</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">test2</td><td>9.9 sec </td><td></td></tr><tr><td align="center">12</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">Building pipelinejob</td><td>9.9 sec </td><td>Scheduling project: pipelinejob
Starting building: pipelinejob #62
</td></tr><tr><td align="center">17</td><td align="center"><img src="http://localhost:8080/jenkins/static/e59dfe28/images/32x32/blue.gif" /></td><td  align="left">End of Pipeline</td><td></td><td></td></tr>			
			</table>		
		</div>

</div>
</BODY>
  
  
</div>
